<div local-class="root">
  <div local-class="avatar">
    <img src="{{comment.creator.avatarUrl}}" height=32 width=32>
  </div>

  <div local-class="main">
    <div local-class="meta">
      <span local-class="username">{{comment.creator.name}}</span>
      <span local-class="timestamp">{{moment-from-now comment.updatedAt}}</span>
      <span local-class="edit" {{action (toggle 'isEditing' this)}}>Edit</span>
      <span local-class="delete" {{action (optional removeComment)}}>Delete</span>
    </div>

    {{#if isEditing}}
      {{comment-thread/form
        content=(join '' (map-by 'content' comment.blocks))
        submitComment=(pipe-action (action (optional editComment)) (action (mut isEditing) false))}}
    {{else}}
    <div local-class="content">
      {{#each comment.blocks as |block|}}
        <div local-class="block">
          {{block.content}}
        </div>
      {{/each}}
    </div>
    {{/if}}
  </div>
</div>
